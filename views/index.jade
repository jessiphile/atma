extends layout 
//- ^^ Self Explanatory
block content
  //- vv The screen seen on loadup. Disapears when all elements are loaded or after 1 second, whichever comes last.
  div#splash(class='splash')
    div(style='width: 100%; height: 50%; display: block; top: 10%; left: 0; position: absolute; display: inline-block;' align='center')
      p(style='text-shadow: 2px 2px 1px rgba(0,0,0,.5); text-align: center; font-size: 7vmin; position: relative; top: 0; left: 50%; transform:translateX(-50%); font-family: "Cinzel Decorative", cursive;') Map Of Atma In Avalonia
      div#splashImages(style='position: relative; top: 52%; display: block; width: 14%; padding-top: 14%; height: 20%;')
        div(style='position: absolute; top: 0; left: 0; width: 100%; height: 100%;')
            img(class='splashImg' src='/images/splash/yellow.png' style='left: 34%; top: 22%;')
            img(class='splashImg' src='/images/splash/green.png' style='left: 16%; top: 50%;')
            img(class='splashImg' src='/images/splash/orange.png' style='left: 32%; top: 78%;')

            img(class='splashImg' src='/images/splash/purple.png' style='left: 66%; top: 22%;')
            img(class='splashImg' src='/images/splash/blue.png' style='left: 84%; top: 50%;')
            img(class='splashImg' src='/images/splash/red.png' style='left: 68%; top: 78%;')

    div(class='loadingText')
    p(style='position: absolute; font-size: 8pt; right: 2%; bottom: 0; color: rgba(255,255,255,.7); text-align: end;') © Created for personal use by Nathanael Johnson
  //- vv A pop up with creditation and copyright info
  div#credits(class='credits')
    div(id="closeButton" class="button cBut" onclick="toggleCredits(false)" style="display: block; z-index: 1000; left: unset; right: 5px;")
      div(class='cBar')
      div(class='cBar c2')
    p(style='text-align: center; font-size: 18pt; color: rgb(201, 184, 36); font-family: "Cinzel Decorative", cursive;') Credits
    div(style='width: 100%; color: white; font-size: 10pt;')
      p The map art as well as the isometric city, village, location, and fortress icons were created in or taken from the 
        a(href='https://www.wonderdraft.net/' target='__blank') Wonderdraft
        |  map making program.
      p All code was written by Nathanael Johnson.
      p If your interested in commissioning Nathanael to build a web app, please send your request to 
        a(href='mailto:main.nrjohnson@gmail.com') main.nrjohnson@gmail.com
        | .
      br
      p © Created for personal use by Nathanael Johnson for 
        a(href='https://artistsnclients.com/' target='__blank') Artists&Clients 
        | user Selfishly. All right reserved. Please refer to creator's 
        a(href='https://www.nrjohnson.net/terms' target='__blank') Terms and Policy 
        | for details on distribution and alteration rights. Any images or artwork included in this product that were provided by the client are the sole responsibility of the client. The creator takes no responsibility for any copyright violations incurred by said images.
  //- vv All specifically map related elements
  div#window(class='window' style="z-index: 500; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden;")
    //- vv Map border
    div#border(style='height: 100%; width: 100%; pointer-events: none;')
      svg(height="100%" width="3px" style='position: absolute; left: 10px; top: 60px; padding-bottom: 90px;')
        line(x1="0" y1="0" x2="0" y2="100%" style="stroke:black;stroke-width:10px")
      svg(height="100%" width="3px" style='position: absolute; right: 10px; top: 60px; padding-bottom: 90px;')
        line(x1="0" y1="0" x2="0" y2="100%" style="stroke:black;stroke-width:10px")
      svg(height="3px" width="100%" style='position: absolute; top: 10px; left: 60px; padding-right: 90px;')
        line(x1="0" y1="0" x2="100%" y2="0" style="stroke:black;stroke-width:10px")
      svg(height="3px" width="100%" style='position: absolute; bottom: 10px; left: 60px; padding-right: 90px;')
        line(x1="0" y1="0" x2="100%" y2="0" style="stroke:black;stroke-width:10px")
      img(src='/images/corner.svg' class='bCorners' style='top: 10px; left: 10px; transform: rotate(90deg)')
      img(src='/images/corner.svg' class='bCorners' style='top: 10px; right: 10px; transform: rotate(180deg)')
      img(src='/images/corner.svg' class='bCorners' style='bottom: 10px; right: 10px; transform: rotate(-90deg)')
      img(src='/images/corner.svg' class='bCorners' style='bottom: 10px; left: 10px;')
    //- vv Menu panel on the left hand of the screen
    div#menu(class='menu' style='')
      //- vv Menu and zoom buttons
      div#buttons(style="position: relative; top: 0; left: 100%;")
        div(id="menuBut" class="button menBut" onclick='toggleMenu()' style="position: absolute; left: 25px; top: 50px;")
          div(class='bar1')
          div(class='bar2')
          div(class='bar3')
        div(id="plus" class="button" onclick="zoomIn(.5)" style="position: absolute; left: 25px; top: 80px;")
          div(class='zBar')
          div(class='zBar b1')
        div(id="minus" class="button" onclick="zoomOut(.5)" style="position: absolute; left: 25px; top: 110px;")
          div(class='zBar')
      //- vv Main menu panel
      div(class='boxCont' style='')
        div(class='cont title' style='padding: 4px 4px 0 4px;')
          p() Menu
        hr(style='background-color: white; width: 90%; margin: 8px auto;')
        //- vv Check boxes for different location categories.
        div(class='cont info' style='padding-bottom: 0;')
          ul#toggles(class='toggles')
            p(style='margin-left: -8px;')
              strong Toggle Location Types:
            li#country(class='specCheck' style='margin-top: 12px;' onclick='toggleCheck(this.id, null)')
              input#countryCheck(type='checkbox' name='country' checked=true)
              span(class='checkmark')
              label(for='country' ) Countries
            li#city(class='specCheck' onclick='toggleCheck(this.id, null)')
              input#cityCheck(type='checkbox' name='city' checked=true)
              span(class='checkmark')
              label(for='city') Cities
            li#village(class='specCheck' onclick='toggleCheck(this.id, null)')
              input#villageCheck(type='checkbox' name='village' checked=true)
              span(class='checkmark')
              label(for='village') Villages
            li#fortress(class='specCheck' onclick='toggleCheck(this.id, null)')
              input#fortressCheck(type='checkbox' name='fortress' checked=true)
              span(class='checkmark')
              label(for='fortress') Fortresses
            li#location(class='specCheck' onclick='toggleCheck(this.id, null)')
              input#locationCheck(type='checkbox' name='location' checked=true)
              span(class='checkmark')
              label(for='location') Locations of Interest
              hr(style='background-color: white; width: 70%; margin: 8px 8px; pointer-events: none;')
            
            li#capital(class='specCheck' style='margin-top: 0;' onclick='toggleCheck(this.id, null)')
              input#capitalCheck(type='checkbox' name='capital' checked=true)
              span(class='checkmark')
              label(for='capital') Nation Capitals
            li#borders(class='specCheck' style='margin-top: 0;' onclick='toggleCheck(this.id, null)')
              input#bordersCheck(type='checkbox' name='borders' checked=false)
              span(class='checkmark')
              label(for='capital') Nation Borders
            li#all(class='specCheck' style='margin-top: 0;' onclick='toggleAllChecks(this)')
              input#allCheck(type='checkbox' name='country' checked=false)
              span(class='checkmark')
              label(for='location') Toggle All
          
          hr(style='background-color: white; width: 100%; margin: 8px auto;')
          p(style='width: 100%; padding: 8px 0 0 0; line-height: .8; font-family: "Cinzel Decorative", cursive;')
            strong All Locations:
          //- vv Checkboxes for each individual location. Runs a loop through the "info" attribute provided by the route.
          ul(class='locList' style='')
            for dot in info
              li(id=dot.id + 'CheckMain' class='checkMain' style='')
                div(class='specCheck' style='display: inline-block;' onclick='toggleSpecLoc("' + dot.id + '")')
                  input(id=dot.id + 'Check' type='checkbox' style='pointer-events: none;' checked=true)
                  span(class='checkmark')
                  if(dot.name)
                    label(style='pointer-events: none;')= dot.name
                  else 
                    label(style='pointer-events: none;')= 'Empty Location (' + dot.left + ' x ' + dot.top + ')'
                if(dot.info && !dot.type.includes("nosel"))
                  span(id=dot.id + 'Sel' class='selLink' style='' onclick='select("' + dot.id + '")') (Select)
          
        //- vv Brief copyright info with link to toggle main.
        div(style='color: white; font-size: 7pt; line-height: .5; padding: 8px; padding-top: 0;')
          hr(style='background-color: white; width: 95%; margin: 0 auto 10px auto;')
          p(onclick='toggleCredits(true)' class='credLink') Credits and Copyright
          p() © Created for personal use by Nathanael Johnson
    //- vv Right hand info panel that load location information.
    div#info(class='infoBox')
        div(id="closeButton" class="button cBut" onclick="toggleInfoBox(true)" style="")
          div(class='cBar')
          div(class='cBar c2')
        div(class='boxCont' style='')
          div(class='cont title')
          hr(style='background-color: white; width: 85%; margin-top: 0;')
          div(class='cont info')
          div(class='cont footer' style='')
            div(style='position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden;')
              div#infoImgCont(style='height: 100%; position: relative;')
                img#infoImage(src='' style='position: relative; transform: translateX(-50%);left: 50%; height: 100%; box-shadow: 0 0 2px black;')
    //- The map, water texture and all icons.
    div#map(style='display: flex; position: absolute; left: 0; top: 0;' onmousemove="dragElement(this)")
      //- vv Water texture
      div#background(class="background" style='')
        //- vv main map image
        img#mapImage(src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class='landImage' style='position: relative; height: 100%; width: 100%;')
        //- vv animated ships
        div(style='position: absolute; top: 0; left: 0;  height: 100%; width: 100%;')
          div#ships
            span#ship1(class='ship')
              img(src='/images/icons/ship1.png' class='ship1' style='width: 20px')
              div(style='display:none; left: 1000px; top: 535px;')
            span#ship2(class='ship')
              img(src='/images/icons/ship2.png'  class='ship2' style='width: 20px')
              div(style='display:none; left: 400px; top: 0;')
            span#ship3(class='ship')
              img(src='/images/icons/ship1.png'  class='ship3' style='width: 20px')
              div(style='display:none; left: 200px; top: 520px;')
            span#ship4(class='ship')
              img(src='/images/icons/ship1.png'  class='ship4' style='width: 20px')
              div(style='display:none; left: 167px; top: 450px;')
          //- vv a loop that places all locations on the map and loads hidden elements to store their information (i.e. coordinates, description)
          div#allDots
            for dot in info
                if(dot.type.includes("text"))
                  if dot.info
                    span(id=dot.id class=dot.type + ' textSel show' style='position: absolute; display: block; top: ' + dot.top + 'px; left:' + dot.left + 'px;' onclick='select(this.id)')= dot.name
                      div(style="display: none; top: " + dot.top + "px; left: " + dot.left + "px;")
                      span#locTitle(style='display: none;')= dot.name
                      span(style='display: none;') !{dot.info}
                  else 
                    span(id=dot.id class=dot.type + ' show' style='position: absolute; display: block; top: ' + dot.top + 'px; left:' + dot.left + 'px;')= dot.name
                      div(style="display: none; top: " + dot.top + "px; left: " + dot.left + "px;")
                else
                  span(id=dot.id class=dot.type + ' zoomOut show' style='position: absolute; display: block; top: ' + dot.top + 'px; left:' + dot.left + 'px;' onclick='select(this.id)')
                    div(style="display: none; top: " + dot.top + "px; left: " + dot.left + "px;")
                    span#locTitle(class='locTitle')= dot.name
                    span(style='display: none;') !{dot.info}
                    if dot.type.includes('capital')
                      img(src='/images/icons/capital star.png')
                    if dot.images
                      div#locImage(style='display: none;')= dot.images

    
    //- vv used to display coordinates of mouse to make placing locations easier. Activated in script by adding mousePos(event) to #map
    div(id="print" style="font-size: 7pt; visibility: hidden; position: absolute; bottom: 18px; right: 55px; color: white;") Error Checker: none